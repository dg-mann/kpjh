import{h as b,r as c,i as L,j as O,_ as y,m as I,k as _,l as F,q as mt,s as N,t as ne,v as X,x as Se,y as ye,z as vt,a as fe,A as le,o as E,c as ue,w as Q,B as U,C as H,D as Be,E as yt,F as D,e as j,G as ve,H as Ce,I as ie,J as ft,p as Re,b as Ee,K as ht,L as _t,M as gt,u as Ie,N as bt,O as Lt,f as Te}from"./entry.fad59579.js";import{_ as Ot}from"./Diashow.03c865d9.js";import{p as wt}from"./FileSaver.min.6bf4cac9.js";import{_ as St}from"./DefaultView.369559e8.js";const Ct=(e,o)=>{for(const t of Object.keys(o))e.on(t,o[t])},Pe=e=>{for(const o of Object.keys(e)){const t=e[o];t&&$(t.cancel)&&t.cancel()}},It=e=>!e||typeof e.charAt!="function"?e:e.charAt(0).toUpperCase()+e.slice(1),$=e=>typeof e=="function",w=(e,o,t)=>{for(const a in t){const n="set"+It(a);e[n]?Se(()=>t[a],(l,s)=>{e[n](l,s)}):o[n]&&Se(()=>t[a],l=>{o[n](l)})}},g=(e,o,t={})=>{const a={...t};for(const n in e){const l=o[n],s=e[n];l&&(l&&l.custom===!0||s!==void 0&&(a[n]=s))}return a},A=e=>{const o={};for(const t in e)if(t.startsWith("on")&&!t.startsWith("onUpdate")&&t!=="onReady"){const a=t.slice(2).toLocaleLowerCase();o[a]=e[t]}return o},Tt=async e=>{const o=await Promise.all([y(()=>import("./marker-icon-2x.e148f0f7.js"),[],import.meta.url),y(()=>import("./marker-icon.d6994ad0.js"),[],import.meta.url),y(()=>import("./marker-shadow.a7f70f89.js"),[],import.meta.url)]);delete e.Default.prototype._getIconUrl,e.Default.mergeOptions({iconRetinaUrl:o[0].default,iconUrl:o[1].default,shadowUrl:o[2].default})},re=e=>{const o=c((...a)=>console.warn(`Method ${e} has been invoked without being replaced`)),t=(...a)=>o.value(...a);return t.wrapped=o,N(e,t),t},se=(e,o)=>e.wrapped.value=o,h=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||globalThis,v=e=>{const o=L(e);if(!o)throw new Error(`Attempt to inject ${e} before it was provided.`);return o},S=Symbol(),R=Symbol(),ce=Symbol(),Y=Symbol(),ke=Symbol(),De=Symbol(),Ne=Symbol(),Ve=Symbol(),xe=Symbol(),Me=Symbol(),ze=Symbol(),$e=Symbol(),ee={options:{type:Object,default:()=>({}),custom:!0}},te=e=>({options:e.options,methods:{}}),J={...ee,pane:{type:String},attribution:{type:String},name:{type:String,custom:!0},layerType:{type:String,custom:!0},visible:{type:Boolean,custom:!0,default:!0}},oe=(e,o,t)=>{const a=v(R),n=v(ce),{options:l,methods:s}=te(e),r=g(e,J,l),i=()=>a({leafletObject:o.value}),u=()=>n({leafletObject:o.value}),d={...s,setAttribution(m){u(),o.value.options.attribution=m,e.visible&&i()},setName(){u(),e.visible&&i()},setLayerType(){u(),e.visible&&i()},setVisible(m){o.value&&(m?i():u())},bindPopup(m){if(!o.value||!$(o.value.bindPopup)){console.warn("Attempt to bind popup before bindPopup method available on layer.");return}o.value.bindPopup(m)},bindTooltip(m){if(!o.value||!$(o.value.bindTooltip)){console.warn("Attempt to bind tooltip before bindTooltip method available on layer.");return}o.value.bindTooltip(m)},unbindTooltip(){o.value&&($(o.value.closeTooltip)&&o.value.closeTooltip(),$(o.value.unbindTooltip)&&o.value.unbindTooltip())},unbindPopup(){o.value&&($(o.value.closePopup)&&o.value.closePopup(),$(o.value.unbindPopup)&&o.value.unbindPopup())},updateVisibleProp(m){t.emit("update:visible",m)}};return N(xe,d.bindPopup),N(Me,d.bindTooltip),N(ze,d.unbindPopup),N($e,d.unbindTooltip),ye(()=>{d.unbindPopup(),d.unbindTooltip(),u()}),{options:r,methods:d}},V=(e,o)=>{if(e&&o.default)return F("div",{style:{display:"none"}},o.default())},Ue={...J,interactive:{type:Boolean,default:void 0},bubblingMouseEvents:{type:Boolean,default:void 0}},jt=(e,o,t)=>{const{options:a,methods:n}=oe(e,o,t);return{options:g(e,Ue,a),methods:n}},he={...Ue,stroke:{type:Boolean,default:void 0},color:{type:String},weight:{type:Number},opacity:{type:Number},lineCap:{type:String},lineJoin:{type:String},dashArray:{type:String},dashOffset:{type:String},fill:{type:Boolean,default:void 0},fillColor:{type:String},fillOpacity:{type:Number},fillRule:{type:String},className:{type:String}},Fe=(e,o,t)=>{const{options:a,methods:n}=jt(e,o,t),l=g(e,he,a),s=v(ce),r={...n,setStroke(i){o.value.setStyle({stroke:i})},setColor(i){o.value.setStyle({color:i})},setWeight(i){o.value.setStyle({weight:i})},setOpacity(i){o.value.setStyle({opacity:i})},setLineCap(i){o.value.setStyle({lineCap:i})},setLineJoin(i){o.value.setStyle({lineJoin:i})},setDashArray(i){o.value.setStyle({dashArray:i})},setDashOffset(i){o.value.setStyle({dashOffset:i})},setFill(i){o.value.setStyle({fill:i})},setFillColor(i){o.value.setStyle({fillColor:i})},setFillOpacity(i){o.value.setStyle({fillOpacity:i})},setFillRule(i){o.value.setStyle({fillRule:i})},setClassName(i){o.value.setStyle({className:i})}};return X(()=>{s({leafletObject:o.value})}),{options:l,methods:r}},_e={...he,radius:{type:Number},latLng:{type:[Object,Array],required:!0,custom:!0}},Ze=(e,o,t)=>{const{options:a,methods:n}=Fe(e,o,t),l=g(e,_e,a),s={...n,setRadius(r){o.value.setRadius(r)},setLatLng(r){o.value.setLatLng(r)}};return{options:l,methods:s}},qe={..._e,radius:{type:Number}},At=(e,o,t)=>{const{options:a,methods:n}=Ze(e,o,t),l=g(e,qe,a),s={...n};return{options:l,methods:s}};b({name:"LCircle",props:qe,setup(e,o){const t=c(),a=c(!1),n=L(S),l=v(R),{options:s,methods:r}=At(e,t,o);return O(async()=>{const{circle:i}=n?h.L:await y(()=>import("./leaflet-src.esm.457c3857.js"),[],import.meta.url);t.value=I(i(e.latLng,s));const u=A(o.attrs);t.value.on(u),w(r,t.value,e),l({...e,...r,leafletObject:t.value}),a.value=!0,_(()=>o.emit("ready",t.value))}),{ready:a,leafletObject:t}},render(){return V(this.ready,this.$slots)}});b({name:"LCircleMarker",props:_e,setup(e,o){const t=c(),a=c(!1),n=L(S),l=v(R),{options:s,methods:r}=Ze(e,t,o);return O(async()=>{const{circleMarker:i}=n?h.L:await y(()=>import("./leaflet-src.esm.457c3857.js"),[],import.meta.url);t.value=I(i(e.latLng,s));const u=A(o.attrs);t.value.on(u),w(r,t.value,e),l({...e,...r,leafletObject:t.value}),a.value=!0,_(()=>o.emit("ready",t.value))}),{ready:a,leafletObject:t}},render(){return V(this.ready,this.$slots)}});const W={...ee,position:{type:String}},ae=(e,o)=>{const{options:t,methods:a}=te(e),n=g(e,W,t),l={...a,setPosition(s){o.value&&o.value.setPosition(s)}};return ye(()=>{o.value&&o.value.remove()}),{options:n,methods:l}},Bt=e=>e.default?F("div",{ref:"root"},e.default()):null;b({name:"LControl",props:{...W,disableClickPropagation:{type:Boolean,custom:!0,default:!0},disableScrollPropagation:{type:Boolean,custom:!0,default:!1}},setup(e,o){const t=c(),a=c(),n=L(S),l=v(Y),{options:s,methods:r}=ae(e,t);return O(async()=>{const{Control:i,DomEvent:u}=n?h.L:await y(()=>import("./leaflet-src.esm.457c3857.js"),[],import.meta.url),d=i.extend({onAdd(){return a.value}});t.value=I(new d(s)),w(r,t.value,e),l({leafletObject:t.value}),e.disableClickPropagation&&a.value&&u.disableClickPropagation(a.value),e.disableScrollPropagation&&a.value&&u.disableScrollPropagation(a.value),_(()=>o.emit("ready",t.value))}),{root:a,leafletObject:t}},render(){return Bt(this.$slots)}});const Ge={...W,prefix:{type:String}},Rt=(e,o)=>{const{options:t,methods:a}=ae(e,o),n=g(e,Ge,t),l={...a,setPrefix(s){o.value.setPrefix(s)}};return{options:n,methods:l}};b({name:"LControlAttribution",props:Ge,setup(e,o){const t=c(),a=L(S),n=v(Y),{options:l,methods:s}=Rt(e,t);return O(async()=>{const{control:r}=a?h.L:await y(()=>import("./leaflet-src.esm.457c3857.js"),[],import.meta.url);t.value=I(r.attribution(l)),w(s,t.value,e),n({leafletObject:t.value}),_(()=>o.emit("ready",t.value))}),{leafletObject:t}},render(){return null}});const He={...W,collapsed:{type:Boolean,default:void 0},autoZIndex:{type:Boolean,default:void 0},hideSingleBase:{type:Boolean,default:void 0},sortLayers:{type:Boolean,default:void 0},sortFunction:{type:Function}},Et=(e,o)=>{const{options:t}=ae(e,o);return{options:g(e,He,t),methods:{addLayer(a){a.layerType==="base"?o.value.addBaseLayer(a.leafletObject,a.name):a.layerType==="overlay"&&o.value.addOverlay(a.leafletObject,a.name)},removeLayer(a){o.value.removeLayer(a.leafletObject)}}}};b({name:"LControlLayers",props:He,setup(e,o){const t=c(),a=L(S),n=v(ke),{options:l,methods:s}=Et(e,t);return O(async()=>{const{control:r}=a?h.L:await y(()=>import("./leaflet-src.esm.457c3857.js"),[],import.meta.url);t.value=I(r.layers(void 0,void 0,l)),w(s,t.value,e),n({...e,...s,leafletObject:t.value}),_(()=>o.emit("ready",t.value))}),{leafletObject:t}},render(){return null}});const Je={...W,maxWidth:{type:Number},metric:{type:Boolean,default:void 0},imperial:{type:Boolean,default:void 0},updateWhenIdle:{type:Boolean,default:void 0}},Pt=(e,o)=>{const{options:t,methods:a}=ae(e,o);return{options:g(e,Je,t),methods:a}};b({name:"LControlScale",props:Je,setup(e,o){const t=c(),a=L(S),n=v(Y),{options:l,methods:s}=Pt(e,t);return O(async()=>{const{control:r}=a?h.L:await y(()=>import("./leaflet-src.esm.457c3857.js"),[],import.meta.url);t.value=I(r.scale(l)),w(s,t.value,e),n({leafletObject:t.value}),_(()=>o.emit("ready",t.value))}),{leafletObject:t}},render(){return null}});const We={...W,zoomInText:{type:String},zoomInTitle:{type:String},zoomOutText:{type:String},zoomOutTitle:{type:String}},kt=(e,o)=>{const{options:t,methods:a}=ae(e,o);return{options:g(e,We,t),methods:a}};b({name:"LControlZoom",props:We,setup(e,o){const t=c(),a=L(S),n=v(Y),{options:l,methods:s}=kt(e,t);return O(async()=>{const{control:r}=a?h.L:await y(()=>import("./leaflet-src.esm.457c3857.js"),[],import.meta.url);t.value=I(r.zoom(l)),w(s,t.value,e),n({leafletObject:t.value}),_(()=>o.emit("ready",t.value))}),{leafletObject:t}},render(){return null}});const pe={...J},ge=(e,o,t)=>{const{options:a,methods:n}=oe(e,o,t),l=g(e,pe,a),s={...n,addLayer(r){o.value.addLayer(r.leafletObject)},removeLayer(r){o.value.removeLayer(r.leafletObject)}};return N(R,s.addLayer),N(ce,s.removeLayer),{options:l,methods:s}},Ke={...pe},Dt=(e,o,t)=>{const{options:a,methods:n}=ge(e,o,t),l=g(e,Ke,a),s={...n};return{options:l,methods:s}};b({props:Ke,setup(e,o){const t=c(),a=c(!1),n=L(S),l=v(R),{methods:s,options:r}=Dt(e,t,o);return O(async()=>{const{featureGroup:i}=n?h.L:await y(()=>import("./leaflet-src.esm.457c3857.js"),[],import.meta.url);t.value=I(i(void 0,r));const u=A(o.attrs);t.value.on(u),w(s,t.value,e),l({...e,...s,leafletObject:t.value}),a.value=!0,_(()=>o.emit("ready",t.value))}),{ready:a,leafletObject:t}},render(){return V(this.ready,this.$slots)}});const Qe={...pe,geojson:{type:[Object,Array],custom:!0},optionsStyle:{type:Function,custom:!0}},Nt=(e,o,t)=>{const{options:a,methods:n}=ge(e,o,t),l=g(e,Qe,a);Object.prototype.hasOwnProperty.call(e,"optionsStyle")&&(l.style=e.optionsStyle);const s={...n,setGeojson(r){o.value.clearLayers(),o.value.addData(r)},setOptionsStyle(r){o.value.setStyle(r)},getGeoJSONData(){return o.value.toGeoJSON()},getBounds(){return o.value.getBounds()}};return{options:l,methods:s}};b({props:Qe,setup(e,o){const t=c(),a=c(!1),n=L(S),l=v(R),{methods:s,options:r}=Nt(e,t,o);return O(async()=>{const{geoJSON:i}=n?h.L:await y(()=>import("./leaflet-src.esm.457c3857.js"),[],import.meta.url);t.value=I(i(e.geojson,r));const u=A(o.attrs);t.value.on(u),w(s,t.value,e),l({...e,...s,leafletObject:t.value}),a.value=!0,_(()=>o.emit("ready",t.value))}),{ready:a,leafletObject:t}},render(){return V(this.ready,this.$slots)}});const be={...J,opacity:{type:Number},zIndex:{type:Number},tileSize:{type:[Number,Array,Object]},noWrap:{type:Boolean,default:void 0},minZoom:{type:Number},maxZoom:{type:Number}},Xe=(e,o,t)=>{const{options:a,methods:n}=oe(e,o,t),l=g(e,be,a),s={...n,setTileComponent(){var r;(r=o.value)==null||r.redraw()}};return ye(()=>{o.value.off()}),{options:l,methods:s}},Vt=(e,o,t,a)=>e.extend({initialize(n){this.tileComponents={},this.on("tileunload",this._unloadTile),t.setOptions(this,n)},createTile(n){const l=this._tileCoordsToKey(n);this.tileComponents[l]=o.create("div");const s=F({setup:a,props:["coords"]},{coords:n});return vt(s,this.tileComponents[l]),this.tileComponents[l]},_unloadTile(n){const l=this._tileCoordsToKey(n.coords);this.tileComponents[l]&&(this.tileComponents[l].innerHTML="",this.tileComponents[l]=void 0)}});b({props:{...be,childRender:{type:Function,required:!0}},setup(e,o){const t=c(),a=c(null),n=c(!1),l=L(S),s=v(R),{options:r,methods:i}=Xe(e,t,o);return O(async()=>{const{GridLayer:u,DomUtil:d,Util:m}=l?h.L:await y(()=>import("./leaflet-src.esm.457c3857.js"),[],import.meta.url),P=Vt(u,d,m,e.childRender);t.value=I(new P(r));const f=A(o.attrs);t.value.on(f),w(i,t.value,e),s({...e,...i,leafletObject:t.value}),n.value=!0,_(()=>o.emit("ready",t.value))}),{root:a,ready:n,leafletObject:t}},render(){return this.ready?F("div",{style:{display:"none"},ref:"root"}):null}});const je={iconUrl:{type:String},iconRetinaUrl:{type:String},iconSize:{type:[Object,Array]},iconAnchor:{type:[Object,Array]},popupAnchor:{type:[Object,Array]},tooltipAnchor:{type:[Object,Array]},shadowUrl:{type:String},shadowRetinaUrl:{type:String},shadowSize:{type:[Object,Array]},shadowAnchor:{type:[Object,Array]},bgPos:{type:[Object,Array]},className:{type:String}},xt=b({name:"LIcon",props:{...je,...ee},setup(e,o){const t=c(),a=L(S),n=v(De),l=v(Ne),s=v(Ve);let r,i,u,d,m;const P=(B,k,M)=>{const z=B&&B.innerHTML;if(!k){M&&m&&n()&&l(z);return}const Z=A(o.attrs);m&&i(m,Z);const{options:q}=te(e),G=g(e,je,q);z&&(G.html=z),m=G.html?u(G):d(G),r(m,Z),s(m)},f=()=>{_(()=>P(t.value,!0,!1))},x=()=>{_(()=>P(t.value,!1,!0))},T={setIconUrl:f,setIconRetinaUrl:f,setIconSize:f,setIconAnchor:f,setPopupAnchor:f,setTooltipAnchor:f,setShadowUrl:f,setShadowRetinaUrl:f,setShadowAnchor:f,setBgPos:f,setClassName:f,setHtml:f};return O(async()=>{const{DomEvent:B,divIcon:k,icon:M}=a?h.L:await y(()=>import("./leaflet-src.esm.457c3857.js"),[],import.meta.url);r=B.on,i=B.off,u=k,d=M,w(T,{},e),new MutationObserver(x).observe(t.value,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),f()}),{root:t}},render(){const e=this.$slots.default?this.$slots.default():void 0;return F("div",{ref:"root"},e)}}),Ye={...J,opacity:{type:Number},alt:{type:String},interactive:{type:Boolean,default:void 0},crossOrigin:{type:Boolean,default:void 0},errorOverlayUrl:{type:String},zIndex:{type:Number},className:{type:String},url:{type:String,required:!0,custom:!0},bounds:{type:[Array,Object],required:!0,custom:!0}},Mt=(e,o,t)=>{const{options:a,methods:n}=oe(e,o,t),l=g(e,Ye,a),s={...n,setOpacity(r){return o.value.setOpacity(r)},setUrl(r){return o.value.setUrl(r)},setBounds(r){return o.value.setBounds(r)},getBounds(){return o.value.getBounds()},getElement(){return o.value.getElement()},bringToFront(){return o.value.bringToFront()},bringToBack(){return o.value.bringToBack()},setZIndex(r){return o.value.setZIndex(r)}};return{options:l,methods:s}};b({name:"LImageOverlay",props:Ye,setup(e,o){const t=c(),a=c(!1),n=L(S),l=v(R),{options:s,methods:r}=Mt(e,t,o);return O(async()=>{const{imageOverlay:i}=n?h.L:await y(()=>import("./leaflet-src.esm.457c3857.js"),[],import.meta.url);t.value=I(i(e.url,e.bounds,s));const u=A(o.attrs);t.value.on(u),w(r,t.value,e),l({...e,...r,leafletObject:t.value}),a.value=!0,_(()=>o.emit("ready",t.value))}),{ready:a,leafletObject:t}},render(){return V(this.ready,this.$slots)}});b({props:pe,setup(e,o){const t=c(),a=c(!1),n=L(S),l=v(R),{methods:s}=ge(e,t,o);return O(async()=>{const{layerGroup:r}=n?h.L:await y(()=>import("./leaflet-src.esm.457c3857.js"),[],import.meta.url);t.value=I(r(void 0,e.options));const i=A(o.attrs);t.value.on(i),w(s,t.value,e),l({...e,...s,leafletObject:t.value}),a.value=!0,_(()=>o.emit("ready",t.value))}),{ready:a,leafletObject:t}},render(){return V(this.ready,this.$slots)}});function et(e,o,t){var a,n,l;o===void 0&&(o=50),t===void 0&&(t={});var s=(a=t.isImmediate)!=null&&a,r=(n=t.callback)!=null&&n,i=t.maxWait,u=Date.now(),d=[];function m(){if(i!==void 0){var f=Date.now()-u;if(f+o>=i)return i-f}return o}var P=function(){var f=[].slice.call(arguments),x=this;return new Promise(function(T,B){var k=s&&l===void 0;if(l!==void 0&&clearTimeout(l),l=setTimeout(function(){if(l=void 0,u=Date.now(),!s){var z=e.apply(x,f);r&&r(z),d.forEach(function(Z){return(0,Z.resolve)(z)}),d=[]}},m()),k){var M=e.apply(x,f);return r&&r(M),T(M)}d.push({resolve:T,reject:B})})};return P.cancel=function(f){l!==void 0&&clearTimeout(l),d.forEach(function(x){return(0,x.reject)(f)}),d=[]},P}const Ae={...ee,center:{type:[Object,Array]},bounds:{type:[Array,Object]},maxBounds:{type:[Array,Object]},zoom:{type:Number},minZoom:{type:Number},maxZoom:{type:Number},paddingBottomRight:{type:[Object,Array]},paddingTopLeft:{type:Object},padding:{type:Object},worldCopyJump:{type:Boolean,default:void 0},crs:{type:[String,Object]},maxBoundsViscosity:{type:Number},inertia:{type:Boolean,default:void 0},inertiaDeceleration:{type:Number},inertiaMaxSpeed:{type:Number},easeLinearity:{type:Number},zoomAnimation:{type:Boolean,default:void 0},zoomAnimationThreshold:{type:Number},fadeAnimation:{type:Boolean,default:void 0},markerZoomAnimation:{type:Boolean,default:void 0},noBlockingAnimations:{type:Boolean,default:void 0},useGlobalLeaflet:{type:Boolean,default:!0,custom:!0}},zt=b({emits:["ready","update:zoom","update:center","update:bounds"],props:Ae,setup(e,o){const t=c(),a=mt({ready:!1,layersToAdd:[],layersInControl:[]}),{options:n}=te(e),l=g(e,Ae,n),s=re(R),r=re(ce),i=re(Y),u=re(ke);N(S,e.useGlobalLeaflet);const d=ne(()=>{const T={};return e.noBlockingAnimations&&(T.animate=!1),T}),m=ne(()=>{const T=d.value;return e.padding&&(T.padding=e.padding),e.paddingTopLeft&&(T.paddingTopLeft=e.paddingTopLeft),e.paddingBottomRight&&(T.paddingBottomRight=e.paddingBottomRight),T}),P={moveend:et(T=>{a.leafletRef&&(o.emit("update:zoom",a.leafletRef.getZoom()),o.emit("update:center",a.leafletRef.getCenter()),o.emit("update:bounds",a.leafletRef.getBounds()))}),overlayadd(T){const B=a.layersInControl.find(k=>k.name===T.name);B&&B.updateVisibleProp(!0)},overlayremove(T){const B=a.layersInControl.find(k=>k.name===T.name);B&&B.updateVisibleProp(!1)}};O(async()=>{e.useGlobalLeaflet&&(h.L=h.L||await y(()=>import("./leaflet-src.3a5f17a4.js").then(p=>p.l),["./leaflet-src.3a5f17a4.js","./Diashow.03c865d9.js","./entry.fad59579.js","./entry.73e31e5e.css","./Diashow.f1e0ab24.css"],import.meta.url));const{map:T,CRS:B,Icon:k,latLngBounds:M,latLng:z,DomEvent:Z,stamp:q}=e.useGlobalLeaflet?h.L:await y(()=>import("./leaflet-src.esm.457c3857.js"),[],import.meta.url);try{l.beforeMapMount&&await l.beforeMapMount()}catch(p){console.error(`The following error occurred running the provided beforeMapMount hook ${p.message}`)}await Tt(k);const G=typeof l.crs=="string"?B[l.crs]:l.crs;l.crs=G||B.EPSG3857;const K={addLayer(p){p.layerType!==void 0&&(a.layerControl===void 0?a.layersToAdd.push(p):a.layersInControl.find(C=>q(C.leafletObject)===q(p.leafletObject))||(a.layerControl.addLayer(p),a.layersInControl.push(p))),p.visible!==!1&&a.leafletRef.addLayer(p.leafletObject)},removeLayer(p){p.layerType!==void 0&&(a.layerControl===void 0?a.layersToAdd=a.layersToAdd.filter(C=>C.name!==p.name):(a.layerControl.removeLayer(p.leafletObject),a.layersInControl=a.layersInControl.filter(C=>q(C.leafletObject)!==q(p.leafletObject)))),a.leafletRef.removeLayer(p.leafletObject)},registerLayerControl(p){a.layerControl=p,a.layersToAdd.forEach(C=>{a.layerControl.addLayer(C)}),a.layersToAdd=[],i(p)},registerControl(p){a.leafletRef.addControl(p.leafletObject)},setZoom(p){const C=a.leafletRef.getZoom();p!==C&&a.leafletRef.setZoom(p,d.value)},setCrs(p){const C=a.leafletRef.getBounds();a.leafletRef.options.crs=p,a.leafletRef.fitBounds(C,{animate:!1,padding:[0,0]})},fitBounds(p){a.leafletRef.fitBounds(p,m.value)},setBounds(p){if(!p)return;const C=M(p);C.isValid()&&!(a.lastSetBounds||a.leafletRef.getBounds()).equals(C,0)&&(a.lastSetBounds=C,a.leafletRef.fitBounds(C))},setCenter(p){if(p==null)return;const C=z(p),we=a.lastSetCenter||a.leafletRef.getCenter();(we.lat!==C.lat||we.lng!==C.lng)&&(a.lastSetCenter=C,a.leafletRef.panTo(C,d.value))}};se(s,K.addLayer),se(r,K.removeLayer),se(i,K.registerControl),se(u,K.registerLayerControl),a.leafletRef=I(T(t.value,l)),w(K,a.leafletRef,e);const pt=A(o.attrs);Ct(a.leafletRef,P),Z.on(a.leafletRef.getContainer(),pt),a.ready=!0,_(()=>o.emit("ready",a.leafletRef))}),X(()=>{Pe(P),a.leafletRef&&(a.leafletRef.off(),a.leafletRef.remove())});const f=ne(()=>a.leafletRef),x=ne(()=>a.ready);return{root:t,ready:x,leafletObject:f}},render(){return F("div",{style:{width:"100%",height:"100%"},ref:"root"},this.ready&&this.$slots.default?this.$slots.default():{})}}),$t=["Symbol(Comment)","Symbol(Text)"],Ut=["LTooltip","LPopup"],tt={...J,draggable:{type:Boolean,default:void 0},icon:{type:[Object]},zIndexOffset:{type:Number},latLng:{type:[Object,Array],custom:!0,required:!0}},Ft=(e,o,t)=>{const{options:a,methods:n}=oe(e,o,t),l=g(e,tt,a),s={...n,setDraggable(r){o.value.dragging&&(r?o.value.dragging.enable():o.value.dragging.disable())},latLngSync(r){t.emit("update:latLng",r.latlng),t.emit("update:lat-lng",r.latlng)},setLatLng(r){if(r!=null&&o.value){const i=o.value.getLatLng();(!i||!i.equals(r))&&o.value.setLatLng(r)}}};return{options:l,methods:s}},Zt=(e,o)=>{const t=o.slots.default&&o.slots.default();return t&&t.length&&t.some(qt)};function qt(e){return!($t.includes(e.type.toString())||Ut.includes(e.type.name))}const Gt=b({name:"LMarker",props:tt,setup(e,o){const t=c(),a=c(!1),n=L(S),l=v(R);N(De,()=>{var u;return!!((u=t.value)!=null&&u.getElement())}),N(Ne,u=>{var d,m;const P=$((d=t.value)==null?void 0:d.getElement)&&((m=t.value)==null?void 0:m.getElement());P&&(P.innerHTML=u)}),N(Ve,u=>{var d;return((d=t.value)==null?void 0:d.setIcon)&&t.value.setIcon(u)});const{options:s,methods:r}=Ft(e,t,o),i={moveHandler:et(r.latLngSync)};return O(async()=>{const{marker:u,divIcon:d}=n?h.L:await y(()=>import("./leaflet-src.esm.457c3857.js"),[],import.meta.url);Zt(s,o)&&(s.icon=d({className:""})),t.value=I(u(e.latLng,s));const m=A(o.attrs);t.value.on(m),t.value.on("move",i.moveHandler),w(r,t.value,e),l({...e,...r,leafletObject:t.value}),a.value=!0,_(()=>o.emit("ready",t.value))}),X(()=>Pe(i)),{ready:a,leafletObject:t}},render(){return V(this.ready,this.$slots)}}),Le={...he,smoothFactor:{type:Number},noClip:{type:Boolean,default:void 0},latLngs:{type:Array,required:!0,custom:!0}},ot=(e,o,t)=>{const{options:a,methods:n}=Fe(e,o,t),l=g(e,Le,a),s={...n,setSmoothFactor(r){o.value.setStyle({smoothFactor:r})},setNoClip(r){o.value.setStyle({noClip:r})},addLatLng(r){o.value.addLatLng(r)}};return{options:l,methods:s}},de={...Le},at=(e,o,t)=>{const{options:a,methods:n}=ot(e,o,t),l=g(e,de,a),s={...n,toGeoJSON(r){return o.value.toGeoJSON(r)}};return{options:l,methods:s}};b({name:"LPolygon",props:de,setup(e,o){const t=c(),a=c(!1),n=L(S),l=v(R),{options:s,methods:r}=at(e,t,o);return O(async()=>{const{polygon:i}=n?h.L:await y(()=>import("./leaflet-src.esm.457c3857.js"),[],import.meta.url);t.value=I(i(e.latLngs,s));const u=A(o.attrs);t.value.on(u),w(r,t.value,e),l({...e,...r,leafletObject:t.value}),a.value=!0,_(()=>o.emit("ready",t.value))}),{ready:a,leafletObject:t}},render(){return V(this.ready,this.$slots)}});b({name:"LPolyline",props:Le,setup(e,o){const t=c(),a=c(!1),n=L(S),l=v(R),{options:s,methods:r}=ot(e,t,o);return O(async()=>{const{polyline:i}=n?h.L:await y(()=>import("./leaflet-src.esm.457c3857.js"),[],import.meta.url);t.value=I(i(e.latLngs,s));const u=A(o.attrs);t.value.on(u),w(r,t.value,e),l({...e,...r,leafletObject:t.value}),a.value=!0,_(()=>o.emit("ready",t.value))}),{ready:a,leafletObject:t}},render(){return V(this.ready,this.$slots)}});const nt={...ee,content:{type:String,default:null}},lt=(e,o)=>{const{options:t,methods:a}=te(e),n={...a,setContent(l){o.value&&l!==null&&l!==void 0&&o.value.setContent(l)}};return{options:t,methods:n}},rt=e=>e.default?F("div",{ref:"root"},e.default()):null,Ht={...nt,latLng:{type:[Object,Array],default:()=>[]}},Jt=(e,o)=>{const{options:t,methods:a}=lt(e,o);return{options:t,methods:a}};b({name:"LPopup",props:Ht,setup(e,o){const t=c(),a=c(null),n=L(S),l=v(xe),s=v(ze),{options:r,methods:i}=Jt(e,t);return O(async()=>{const{popup:u}=n?h.L:await y(()=>import("./leaflet-src.esm.457c3857.js"),[],import.meta.url);t.value=I(u(r)),e.latLng!==void 0&&t.value.setLatLng(e.latLng),w(i,t.value,e);const d=A(o.attrs);t.value.on(d),t.value.setContent(e.content||a.value||""),l(t.value),_(()=>o.emit("ready",t.value))}),X(()=>{s()}),{root:a,leafletObject:t}},render(){return rt(this.$slots)}});const st={...de,latLngs:{...de.latLngs,required:!1},bounds:{type:Object,custom:!0}},Wt=(e,o,t)=>{const{options:a,methods:n}=at(e,o,t),l=g(e,st,a),s={...n,setBounds(r){o.value.setBounds(r)},setLatLngs(r){o.value.setBounds(r)}};return{options:l,methods:s}};b({name:"LRectangle",props:st,setup(e,o){const t=c(),a=c(!1),n=L(S),l=v(R),{options:s,methods:r}=Wt(e,t,o);return O(async()=>{const{rectangle:i,latLngBounds:u}=n?h.L:await y(()=>import("./leaflet-src.esm.457c3857.js"),[],import.meta.url),d=e.bounds?u(e.bounds):u(e.latLngs||[]);t.value=I(i(d,s));const m=A(o.attrs);t.value.on(m),w(r,t.value,e),l({...e,...r,leafletObject:t.value}),a.value=!0,_(()=>o.emit("ready",t.value))}),{ready:a,leafletObject:t}},render(){return V(this.ready,this.$slots)}});const Oe={...be,tms:{type:Boolean,default:void 0},subdomains:{type:[String,Array],validator:e=>typeof e=="string"?!0:Array.isArray(e)?e.every(o=>typeof o=="string"):!1},detectRetina:{type:Boolean,default:void 0},url:{type:String,required:!0,custom:!0}},it=(e,o,t)=>{const{options:a,methods:n}=Xe(e,o,t),l=g(e,Oe,a),s={...n};return{options:l,methods:s}},Kt=b({props:Oe,setup(e,o){const t=c(),a=L(S),n=v(R),{options:l,methods:s}=it(e,t,o);return O(async()=>{const{tileLayer:r}=a?h.L:await y(()=>import("./leaflet-src.esm.457c3857.js"),[],import.meta.url);t.value=I(r(e.url,l));const i=A(o.attrs);t.value.on(i),w(s,t.value,e),n({...e,...s,leafletObject:t.value}),_(()=>o.emit("ready",t.value))}),{leafletObject:t}},render(){return null}}),Qt={...nt},Xt=(e,o)=>{const{options:t,methods:a}=lt(e,o),n=v($e);return X(()=>{n()}),{options:t,methods:a}};b({name:"LTooltip",props:Qt,setup(e,o){const t=c(),a=c(null),n=L(S),l=v(Me),{options:s,methods:r}=Xt(e,t);return O(async()=>{const{tooltip:i}=n?h.L:await y(()=>import("./leaflet-src.esm.457c3857.js"),[],import.meta.url);t.value=I(i(s)),w(r,t.value,e);const u=A(o.attrs);t.value.on(u),t.value.setContent(e.content||a.value||""),l(t.value),_(()=>o.emit("ready",t.value))}),{root:a,leafletObject:t}},render(){return rt(this.$slots)}});const ut={...Oe,layers:{type:String,required:!0},styles:{type:String},format:{type:String},transparent:{type:Boolean,default:void 0},version:{type:String},crs:{type:Object},uppercase:{type:Boolean,default:void 0}},Yt=(e,o,t)=>{const{options:a,methods:n}=it(e,o,t);return{options:g(e,ut,a),methods:{...n}}};b({props:ut,setup(e,o){const t=c(),a=L(S),n=v(R),{options:l,methods:s}=Yt(e,t,o);return O(async()=>{const{tileLayer:r}=a?h.L:await y(()=>import("./leaflet-src.esm.457c3857.js"),[],import.meta.url);t.value=I(r.wms(e.url,l));const i=A(o.attrs);t.value.on(i),w(s,t.value,e),n({...e,...s,leafletObject:t.value}),_(()=>o.emit("ready",t.value))}),{leafletObject:t}},render(){return null}});const eo={components:{LMap:zt,LTileLayer:Kt,LMarker:Gt,LIcon:xt},props:["location"],data(){return{zoom:10,showMap:!1,timer:void 0,center:this.location}},async mounted(){await _();let e=this;setTimeout(function(){e.showMap=!0},1e3)},methods:{mapChangeZoom(e){this.zoom=e,this.reset()},mapChangeLocation(e){this.center=e,this.reset()},reset(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.zoom=14,this.center=this.location},2500)}}};function to(e,o,t,a,n,l){const s=le("l-tile-layer"),r=le("l-icon"),i=le("l-marker"),u=le("l-map");return n.showMap?(E(),ue(u,{key:0,ref:"map","use-global-leaflet":!1,zoom:n.zoom,center:n.center,options:{dragging:!0,zoomControl:!1,scrollWheelZoom:!1,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1},"onUpdate:zoom":l.mapChangeZoom,"onUpdate:center":l.mapChangeLocation},{default:Q(()=>[U(s,{url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png"}),t.location?(E(),ue(i,{key:0,"lat-lng":t.location},{default:Q(()=>[U(r,{"icon-url":"/images/location.svg","icon-size":[35,35]})]),_:1},8,["lat-lng"])):H("",!0)]),_:1},8,["zoom","center","onUpdate:zoom","onUpdate:center"])):H("",!0)}const oo=fe(eo,[["render",to]]);const{saveAs:ao}=wt,no={props:["folderId","open"],data(){return{folders:[],images:[],openedChild:null,showImageModal:!1,loading:!1,clickedImage:0}},watch:{open:async function(){this.loadFolder()}},async created(){this.open&&this.loadFolder()},methods:{async loadFolder(){if(Be("loggedIn").value&&this.folders.length==0&&this.images.length==0){const{data:{value:{files:e}}}=await yt("/api/listImages?id="+this.folderId,"$7Ikf9HeTqT");e&&(this.folders=e.filter(o=>o.mimeType==="application/vnd.google-apps.folder"),this.images=e.filter(o=>o.mimeType!=="application/vnd.google-apps.folder"))}},async openImage(e){this.clickedImage=e,this.showImageModal=!0,await this.loadImage(e),e+1<this.images.length&&await this.loadImage(e+1),e-1>=0&&await this.loadImage(e-1)},async getImageUrl(e){try{const o=await fetch("/api/image?id="+e);if(!o.ok)throw new Error(`Failed to fetch images (${o.status} ${o.statusText})`);const t=await o.arrayBuffer(),a=new Blob([t],{type:"image/png"});return URL.createObjectURL(a)}catch(o){console.error(o)}},async loadImage(e){let o=null;this.images[e].loaded||(o=await this.getImageUrl(this.images[e].id)),o&&(this.images[e].thumbnailLink=o,this.images[e].loaded=!0)},prevImage(e){e-1>=0&&(this.loadImage(e-1),this.clickedImage--)},nextImage(e){e+1<this.images.length&&(this.loadImage(e+1),this.clickedImage++)},downloadImage(e){ao(this.images[e].thumbnailLink,this.images[e].name)}}},dt=e=>(Re("data-v-4a468d73"),e=e(),Ee(),e),lo={class:"accordion accordion-flush"},ro={class:"accordion-item"},so={class:"accordion-header"},io=["data-bs-target","onClick"],uo=["id"],co={key:0,class:"accordion-body"},po={key:0,class:"photoGrid"},mo=["src","onClick"],vo={key:0,class:"loader"},yo=dt(()=>j("path",{d:"M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"},null,-1)),fo=dt(()=>j("path",{d:"M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"},null,-1)),ho=[yo,fo];function _o(e,o,t,a,n,l){const s=ct,r=Ot,i=ft;return E(),D(ve,null,[j("div",lo,[(E(!0),D(ve,null,Ce(n.folders,(u,d)=>(E(),D("div",ro,[j("h2",so,[j("button",{class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#"+u.id,"aria-expanded":"false",onClick:m=>n.openedChild=d},ie(u.name),9,io)]),j("div",{id:u.id,ref_for:!0,ref:"item",class:"accordion-collapse collapse"},[u.id?(E(),D("div",co,[U(s,{"folder-id":u.id,open:n.openedChild==d},null,8,["folder-id","open"])])):H("",!0)],8,uo)]))),256))]),n.images?(E(),D("div",po,[(E(!0),D(ve,null,Ce(n.images,(u,d)=>(E(),D("img",{key:u.name,src:u.thumbnailLink,referrerpolicy:"no-referrer",onClick:m=>l.openImage(d,u.id)},null,8,mo))),128))])):H("",!0),U(i,{show:n.showImageModal,onClose:o[1]||(o[1]=u=>n.showImageModal=!1)},{default:Q(()=>[U(r,{"first-image-id":n.clickedImage,images:n.images.map(u=>u.thumbnailLink),width:"80vw",onNextImage:l.nextImage,onPrevImage:l.prevImage},null,8,["first-image-id","images","onNextImage","onPrevImage"]),n.images[n.clickedImage].loaded?H("",!0):(E(),D("div",vo)),(E(),D("svg",{xmlns:"http://www.w3.org/2000/svg","stroke-width":"1.5",stroke:"white",class:"downloadButton",fill:"currentColor",viewBox:"-1 -1 19 19",onClick:o[0]||(o[0]=u=>l.downloadImage(n.clickedImage))},ho))]),_:1},8,["show"])],64)}const ct=fe(no,[["render",_o],["__scopeId","data-v-4a468d73"]]);const go={props:["album"],emits:["back"],async setup(){const e=ht`
            query getAlbum($id: String!) {
                album(id: $id) {
                    title
                    eventType
                    eventDate
                    location {
                        lat
                        lon
                    }
                    folderId
                }
            }
        `,o={id:_t().params.id},{data:{value:{album:t}}}=await gt(e,o);return{album:t}}},me=e=>(Re("data-v-fe990caf"),e=e(),Ee(),e),bo=me(()=>j("head",null,[j("title",null,"KPJH - Fotos")],-1)),Lo={class:"wrapper"},Oo={class:"title"},wo=me(()=>j("svg",{viewBox:"0 0 24 39",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[j("path",{d:"M1.16478 22.2354C-0.388259 20.7286 -0.388259 18.2714 1.16478 16.7646L17.2934 1.11633C18.8275 -0.37211 21.3011 -0.37211 22.8352 1.11633C24.3883 2.62312 24.3883 5.08036 22.8352 6.58715L9.28584 19.5L22.8352 32.4128C24.3883 33.9196 24.3883 36.3769 22.8352 37.8837C21.3011 39.3721 18.8275 39.3721 17.2934 37.8837L1.16478 22.2354Z",fill:"#3D5C6D","fill-opacity":"0.4"})],-1)),So={class:"map"},Co={key:0,class:"photos"},Io={key:1,class:"contentLocked"},To=me(()=>j("svg",{viewBox:"0 0 34 41",xmlns:"http://www.w3.org/2000/svg",fill:"#304C5C"},[j("path",{d:"M32.0002 18.4503H30.0003V13.3252C30.0003 5.94521 24.2003 0 17 0C9.79975 0 3.99969 5.94503 3.99969 13.3252V18.4503H1.99984C0.899796 18.4503 0 19.3726 0 20.5001V38.9502C0 40.0777 0.89985 41 1.99984 41H32.0002C33.1002 41 34 40.0777 34 38.9502V20.5001C34 19.3726 33.1002 18.4503 32.0002 18.4503ZM7.99991 13.3252C7.99991 8.20022 11.9996 4.10057 16.9996 4.10057C21.9997 4.10057 25.9994 8.20022 25.9994 13.3252V18.4503H7.99919L7.99991 13.3252Z"})],-1)),jo=me(()=>j("p",null,[Te("Bitte melde dich an um"),j("br"),Te("alle Bilder sehen zu können:")],-1));function Ao(e,o,t,a,n,l){const s=bt,r=oo,i=ct,u=St;return E(),ue(u,{titel:"Fotos"},{default:Q(()=>[bo,j("div",Lo,[j("h3",Oo,ie(a.album.eventType)+" "+ie(a.album.title),1),U(s,{class:"backButton",to:"/fotos"},{default:Q(()=>[wo]),_:1}),j("h3",null,ie(a.album.eventDate),1),j("div",So,[a.album.location?(E(),ue(r,{key:0,location:[a.album.location.lat,a.album.location.lon]},null,8,["location"])):H("",!0)]),("useState"in e?e.useState:Ie(Be))("loggedIn").value?(E(),D("div",Co,[U(i,{"folder-id":a.album.folderId,open:"true"},null,8,["folder-id"])])):(E(),D("div",Io,[To,jo,j("button",{class:"btn btn-primary",onClick:o[0]||(o[0]=d=>("useLogin"in e?e.useLogin:Ie(Lt))())}," Anmelden ")]))])]),_:1})}const ko=fe(go,[["render",Ao],["__scopeId","data-v-fe990caf"]]);export{ko as default};
