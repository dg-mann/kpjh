<template>
    <DefaultView titel="Fotos">
		<div v-if="albums" class="folders">
			<div class="searchInput">
				<input type="text" v-model="search" placeholder="Suchen..."/>
				<svg viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg">
					<path fill-rule="evenodd" clip-rule="evenodd" d="M17.2102 6.95564C14.3786 4.12396 9.78748 4.12396 6.9558 6.95564C4.12411 9.78733 4.12411 14.3784 6.9558 17.2101C9.78748 20.0418 14.3786 20.0418 17.2102 17.2101C20.0419 14.3784 20.0419 9.78733 17.2102 6.95564ZM4.12737 4.12722C8.52115 -0.266567 15.6449 -0.266567 20.0387 4.12722C24.0394 8.12793 24.3973 14.392 21.1124 18.7977L26.5071 24.1924C27.2881 24.9734 27.2881 26.2397 26.5071 27.0208C25.726 27.8018 24.4597 27.8018 23.6786 27.0208L18.1917 21.5339C13.8326 24.3575 7.94792 23.8591 4.12737 20.0385C-0.266415 15.6447 -0.266415 8.521 4.12737 4.12722Z"/>
				</svg>
			</div>
			<NuxtLink v-for="album in filteredAlbums" :to="'/fotos/'+album.sys.id" class="album">
				<span>
					<svg viewBox="0 0 19 23" xmlns="http://www.w3.org/2000/svg">
						<path d="M9.5001 0C4.25643 0 0 4.17113 0 9.30938C0 12.2277 1.37244 15.0195 3.07909 17.2965C5.48048 20.5017 8.48178 22.6625 8.50812 22.6818C9.09883 23.1061 9.90117 23.1061 10.4919 22.6818C10.5183 22.6625 13.5197 20.5017 15.9209 17.2965C17.6276 15.0194 19 12.2276 19 9.30938C19 4.17099 14.7434 0 9.4999 0H9.5001ZM9.5001 5.47636C11.6588 5.47636 13.412 7.19422 13.412 9.30957C13.412 11.4251 11.6588 13.143 9.5001 13.143C7.34141 13.143 5.58816 11.4251 5.58816 9.30957C5.58816 7.19422 7.34141 5.47636 9.5001 5.47636Z"/>
					</svg>
					{{album.title}}
				</span>
				<span class="eventType">
					<svg viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
						<path d="M10.9223 0.22422L10.9237 0.222856C11.0684 0.0789456 11.2601 0 11.4631 0H20.801C21.4619 0 22 0.537769 22 1.19937V10.5366C22 10.7412 21.9202 10.933 21.7758 11.0777L11.7029 21.1509C11.1371 21.7171 10.3932 22 9.64941 22C8.90599 22 8.16222 21.7171 7.59629 21.1509L0.849163 14.4039C-0.283054 13.2717 -0.283054 11.4295 0.849163 10.2975L10.9223 0.22422ZM16.6074 7.55045C17.7996 7.55045 18.7659 6.58382 18.7659 5.392C18.7659 4.19983 17.7996 3.23355 16.6074 3.23355C15.4155 3.23355 14.4489 4.19983 14.4489 5.392C14.4491 6.58404 15.4155 7.55045 16.6074 7.55045Z"/>
					</svg>
					{{ album.eventType }}
				</span>
				<span class="date">
					<svg viewBox="0 0 23 23" xmlns="http://www.w3.org/2000/svg">
						<path d="M22.9999 5.03125V7.1874H0.000256552V5.03125C0.000256552 4.45938 0.227536 3.91087 0.631806 3.50644C1.03623 3.10219 1.58469 2.87489 2.1566 2.87489H3.59417L3.594 1.79682C3.594 1.15491 3.93659 0.561644 4.49242 0.240776C5.04842 -0.0802588 5.73345 -0.0802588 6.28927 0.240776C6.84527 0.561644 7.18769 1.15491 7.18769 1.79682V2.87489H15.8126V1.79682C15.8126 1.15491 16.155 0.561644 16.711 0.240776C17.2668 -0.0802588 17.9518 -0.0802588 18.5078 0.240776C19.0637 0.561644 19.4063 1.15491 19.4063 1.79682V2.87489H20.8438H20.8437C21.4155 2.87489 21.964 3.10217 22.3685 3.50644C22.7727 3.91087 23 4.45934 23 5.03125H22.9999ZM0.000256552 9.70309H22.9999V20.8436C22.9999 21.4155 22.7726 21.964 22.3684 22.3684C21.9639 22.7727 21.4155 23 20.8436 23H2.15635C1.58448 23 1.03597 22.7727 0.631549 22.3684C0.227293 21.964 0 21.4156 0 20.8436L0.000256552 9.70309ZM15.0938 14.3749C15.0938 14.5656 15.1695 14.7484 15.3043 14.8831C15.439 15.018 15.6219 15.0937 15.8126 15.0937H17.2501H17.25C17.4406 15.0937 17.6235 15.018 17.7583 14.8831C17.893 14.7485 17.9687 14.5656 17.9687 14.3749V12.9375C17.9687 12.7469 17.893 12.564 17.7583 12.4291C17.6235 12.2945 17.4406 12.2187 17.25 12.2187H15.8126C15.6219 12.2187 15.4391 12.2944 15.3044 12.4291C15.1695 12.564 15.0938 12.7468 15.0938 12.9375L15.0938 14.3749ZM10.0626 14.3749C10.0626 14.5656 10.1385 14.7484 10.2732 14.8831C10.408 15.018 10.5909 15.0937 10.7814 15.0937H12.2189C12.4095 15.0937 12.5923 15.018 12.7272 14.8831C12.8618 14.7485 12.9377 14.5656 12.9377 14.3749V12.9375C12.9377 12.7469 12.8619 12.564 12.7272 12.4291C12.5923 12.2945 12.4095 12.2187 12.2189 12.2187H10.7814C10.5909 12.2187 10.408 12.2944 10.2732 12.4291C10.1385 12.564 10.0626 12.7468 10.0626 12.9375V14.3749ZM10.0626 19.4061C10.0626 19.5967 10.1385 19.7795 10.2732 19.9144C10.408 20.0491 10.5909 20.1249 10.7814 20.1249H12.2189C12.4095 20.1249 12.5923 20.0491 12.7272 19.9144C12.8618 19.7795 12.9377 19.5967 12.9377 19.4061V17.9686C12.9377 17.7781 12.8619 17.5952 12.7272 17.4604C12.5923 17.3257 12.4095 17.2498 12.2189 17.2498H10.7814C10.5909 17.2498 10.408 17.3257 10.2732 17.4604C10.1385 17.5952 10.0626 17.7781 10.0626 17.9686V19.4061ZM5.03143 14.3749C5.03143 14.5656 5.10713 14.7484 5.24183 14.8831C5.3767 15.018 5.55952 15.0937 5.75021 15.0937H7.18778H7.18761C7.37829 15.0937 7.56112 15.018 7.69582 14.8831C7.83068 14.7485 7.90639 14.5656 7.90639 14.3749V12.9375C7.90639 12.7469 7.83068 12.564 7.69582 12.4291C7.56112 12.2945 7.37829 12.2187 7.18761 12.2187H5.75022C5.55954 12.2187 5.37671 12.2944 5.24184 12.4291C5.10714 12.564 5.03143 12.7468 5.03143 12.9375L5.03143 14.3749ZM5.03143 19.4061C5.03143 19.5967 5.10713 19.7795 5.24183 19.9144C5.3767 20.0491 5.55952 20.1249 5.75021 20.1249H7.18778H7.18761C7.37829 20.1249 7.56112 20.0491 7.69582 19.9144C7.83068 19.7795 7.90639 19.5967 7.90639 19.4061V17.9686C7.90639 17.7781 7.83068 17.5952 7.69582 17.4604C7.56112 17.3257 7.37829 17.2498 7.18761 17.2498H5.75022C5.55954 17.2498 5.37671 17.3257 5.24184 17.4604C5.10714 17.5952 5.03143 17.7781 5.03143 17.9686L5.03143 19.4061Z"/>
					</svg>
					{{ album.eventDate }}
				</span>
			</NuxtLink>
		</div>
    </DefaultView>
</template>
<script>

export default {

	data() {
		return {
			search: ''
		}
	},
    async setup() {
        const query = gql`
			query {
  				albums: albumCollection(limit: 0) {
    				items {
						sys {
							id
						},
      					title,
						eventType,
						eventDate
    				}
  				}
			}
        `
        const { data: { value: {albums: {items: albums} } }} = await useAsyncQuery(query)
        return {albums}
    },
	computed: {
		filteredAlbums() {
			return this.search ? this.albums.filter(album => album.title.toLowerCase().includes(this.search.toLocaleLowerCase())) : this.albums
		}
	}
};
</script>
<style lang="scss" scoped>
    .album {
		display: grid;
		grid-template-columns: 1fr 1fr 1fr;
		justify-content: space-between;
		align-items: center;
        background-color: white;
        box-shadow: 0px 0px 5px #5c30303e;
        padding: 20px 30px;
        margin: 10px 0;
        border-radius: 20px;
        width: 100%;
		transition: all 0.5s;
		span {
			display: flex;
			align-items: center;
			svg {
				float: left;
				height: 20px;
				margin-right: 10px;
			}
		}
		span:nth-child(2) {
			justify-self: center;
		}

		span:nth-child(3) {
			justify-self: flex-end;
		}
		&:hover {
        	box-shadow: 0px 0px 10px #0000003e;
    	}
    }

	.searchInput {
		position: relative;
        margin: 20px 0;
        width: 100%;
		svg {
			position: absolute;
			height: 20px;
			right: 30px;
			top: 0;
			bottom: 0;
			margin: auto;
		}
		input {
			width: 100%;
			padding: 18px 30px;
			border-radius: 20px;
			background-color: white;
			box-shadow: 0px 0px 5px #5c30303e;
			border: none;
			&:focus-visible {
				outline: none;
			}
			&::placeholder {color: #7AA1B7;}
		}
	}
	
	.folders {
		width: 80%;
		display: flex;
		flex-direction: column;
		align-items: center;
		max-width: 900px;
		svg {
			fill: #7AA1B7;
		}
		a {
			text-decoration: none;
			color: initial;
		}
		margin-top: -100px;
		margin-bottom: 50px;
    }

	.slide-leave-active,
.slide-enter-active {
  transition: 1s;
}
.slide-enter-from {
  transform: translate(100vw, 0);
}
.slide-leave-to {
  transform: translate(-100vw, 0);
}
    
</style>  
